function bestFeature=chooseFeature(dataset,~)
% 选择信息增益最大的属性特征


%baseEntropy = calShannonEnt(dataset);   %计算当前节点的信息熵
%data_size = size(dataset);
%numFeatures = data_size(2) - 1;      %得到特征个数
%minEntropy = 2.0;
%bestFeature = 0;
%gain = (1:numFeatures);           %创建一个数组，以后用来储存每个特征的信息增益    %%%%%%%%%

[N,M]=size(dataset);                %样本数量N
M=M-1;                              %特征个数M
y=strcmp(dataset(:,M+1),dataset(1,M+1)); %标签y(以第一个标签为1)
x=dataset(:,1:M);                   %数据x
gain = (1:M);                       %创建一个数组，用于储存每个特征的信息增益
%bestFeature;                       %最大信息增益的特征
Ent_D=calShannonEnt(y);             %当前信息熵

%%%%====== 下面语句请同学们完成，循环每一个特征计算信息增益，选取信息增益最大的特征 =======

%计算信息增益
for i=1:M
    % 计算第i种属性的增益
    temp=tabulate(x(:,i));
    value=temp(:,1);            %属性值
    count=cell2mat(temp(:,2));  %不同属性值的各自数量
    Kind_Num=length(value);     %取值数目
    Ent=zeros(Kind_Num,1);
    % i属性下 j取值的信息熵
    for j=1:Kind_Num
        % 在第j种取值下正例的数目
        Ent(j)= calShannonEnt( y(strcmp(x(:,i),value(j))) );
    end
    gain(i)=Ent_D-count'/N*Ent;
end
%随机挑选一个最大值
max_gain=find(gain==max(gain));
choose=randi(length(max_gain));
bestFeature=max_gain(choose);


%%%%===================================================================================
end
