# 用户及文件权限管理
## 三. Linux文件权限

文件权限就是文件的访问控制权限，即哪些用户和组群可以访问文件以及可以执行什么样的操作。

Unix/Linux 系统是一个典型的多用户系统，不同的用户处于不同的地位，对文件和目录有不同的访问权限。为了保护系统的安全性，Unix/Linux 系统除了对用户权限作了严格的界定外，还在用户身份认证、访问控制、传输安全、文件读写权限等方面作了周密的控制。

在 Unix/Linux 中的每一个文件或目录都包含有访问权限，这些访问权限决定了谁能访问和如何访问这些文件和目录。
3.1  查看文件权限

```shell
ls 查看权限
```

adduser 和 useradd 的区别是什么？

答：useradd 只创建用户，不会创建用户密码和工作目录，创建完了需要使用 passwd  <username>  去设置新用户的密码。adduser 在创建用户的同时，会创建工作目录和密码（提示你设置），做这一系列的操作。其实 useradd、userdel 这类操作更像是一种命令，执行完了就返回。而 adduser 更像是一种程序，需要你输入、确定等一系列操作。

Linux 还有一些关于隐藏权限和特殊权限的内容，想全面了解 Linux 权限管理这部分内容的用户可以通过其它方式学习。

## 六.Vim快入门

### 一. 普通模式进入插入模式：

普通模式使用下面的健进入插入模式，并可以从下面的位置开始

命令 |  说明
--- | ---
i | 在当前光标处进行编辑
I | 在行首插入
A | 在行末插入
a | 在光标后插入编辑
o | 在当前行后插入一个新行
O | 在当前行前插入一个新行

### 二. 普通模式下删除vim文本信息

进入普通模式，使用下列命令可以进行文本快速删除

命令 | 说明
--- | ---
x | 删除光标所在的字符
X | 删除光标所在前一个字符
Delete | 同 x
dd | 删除整行(可以ndd来删除n行)
dw | 删除一个单词(不适用于中文)
d$或D | 删除至行尾
d^ | 删除至行首
dG | 删除到文档结尾处
d1G | 删除至文档首部**游标的快速跳转** 

### 三. 游标的快速跳转

#### 1. 行间跳转

| 命令   | 说明                                                  |
| ------ | :---------------------------------------------------- |
| nG/ngg | 游标移动到第n行(可以进入命令模式输入：set nu显示行号) |
| gg     | 游标移动到第一行                                      |
| G      | 到最后一行                                            |

**小技巧：你在完成依次跳转后，可以使用 `Ctrl+o` 快速回到上一次(跳转前)光标所在位置**,这个技巧很实用，比如当你在写代码时，忽然想起有个 bug，需要修改，这时候你跳过去改好了，只需要按下 `Ctrl+o` 就可以回到你之前的位置。vim 中会用很多类似的小技巧就等着你去发掘。

#### 2. 行内跳转

普通模式下使用下列命令在行内按照单词为单位进行跳转：

| 命令     | 说明                                                       |
| -------- | ---------------------------------------------------------- |
| w        | 到下一个单词的开头                                         |
| e        | 到当前单词的结尾                                           |
| b        | 到前一个单词的开头                                         |
| ge       | 到前一个单词的结尾                                         |
| 0或^     | 到行头                                                     |
| $        | 到行尾                                                     |
| f <字母> | 向后搜素该<字母>，并跳转到第一个匹配的位置(非常实用)       |
| F<字母>  | 向前搜索<字母>并跳转到第一个匹配的位置                     |
| t<字母>  | 向后搜索<字母>并跳转到第一个匹配位置之前的一个字母(不常用) |
| T<字母>  | 向前搜索<字母>并跳转到第一个匹配位置之后的一个字母(不常用) |

#### 3. 复制粘贴和剪切

- 普通模式中使用 `y` 复制
- 普通模式中，`yy` 复制游标所在的整行（`3yy` 表示复制 3 行）

## 七. 环境变量与文件查找

**变量**

要解释环境变量，得先明白变量是什么，准确的说应该是 Shell 变量，所谓变量就是计算机中用于记录一个值（不一定是数值，也可以是字符或字符串）的符号，而这些符号将用于不同的运算处理中。通常变量与值是一对一的关系，可以通过表达式读取它的值并赋值给其它变量，也可以直接指定数值赋值给任意变量。为了便于运算和处理，大部分的编程语言会区分变量的类型，用于分别记录数值、字符或者字符串等等数据类型。Shell 中的变量也基本如此，有不同类型（但不用专门指定类型名），可以参与运算，有作用域限定。

> 变量的作用域即变量的有效范围（比如一个函数中、一个源文件中或者全局范围），在该范围内只能有一个同名变量。一旦离开则该变量无效，如同不存在这个变量一般。

使用=====号运算符给变量赋值，shell 中的赋值操作，=====两边不能加空格，这是与其他语言不同的地方。

```bash
# 正确的赋值
tmp=shiyanlou

# 错误的赋值
tmp = shiyanlou
```

读取变量的值，使用 `echo` 命令和 `$` 符号（**$ 符号用于表示引用一个变量的值，初学者经常忘记输入**）：

**注意：并不是任何形式的变量名都是可用的，变量名只能是英文字母、数字或者下划线，且不能以数字作为开头。**

### 1.环境变量

环境变量的作用域比自定义变量的要大，如 Shell 的环境变量作用于自身和它的子进程。在所有的 UNIX 和类 UNIX 系统中，每个进程都有其各自的环境变量设置，且默认情况下，当一个进程被创建时，除了创建过程中明确指定的话，它将继承其父进程的绝大部分环境设置。Shell 程序也作为一个进程运行在操作系统之上，而我们在 Shell 中运行的大部分命令都将以 Shell 的子进程的方式运行。

![](D:\Code_space\Markdown\imags\5-2.png)

通常我们会涉及到的变量类型有三种：

* 当前 Shell 进程私有用户自定义变量，如上面我们创建的 tmp 变量，只在当前 Shell 中有效。
* Shell 本身内建的变量。
* 从自定义变量导出的环境变量。

与上述三种环境变量相关的命令：==set , env, export。==这三个变量很相似，度是用于打印环境变量信息，区别在于涉及的范围不同。

| 命令   | 说明                                                         |
| ------ | ------------------------------------------------------------ |
| set    | 显示当前shell所有变量，包括其内建环境变量(与shell外观等相关)，用户自定义变量及导出的环境变量。 |
| env    | 显示与当前用户相关的环境变量，还可以让命令在指定的环境中运行。 |
| export | 显示从shell中导出环境变量的变量，也可通过它将自定义变量导出为环境变量。 |

![](D:\Code_space\Markdown\imags\5-3.png)

## 八. 文件打包与压缩文件

在Linux中，压缩文件格式有很多种，也正应了在Linux中一切皆文件那句话。简单介绍一下

| 文件后缀名 | 说明                                        |
| ---------- | ------------------------------------------- |
| *.zip      | zip程序打包压缩文件                         |
| *.rar      | rar程序压缩的文件                           |
| *.7z       | 7zip程序压缩的文件                          |
| *.tar      | tar程序打包，未压缩的文件(通常用gzip来压缩) |
| *.gz       | gzip程序(GNU zip)压缩的文件                 |
| *.xz       | xz程序压缩的文件                            |
| *.bz2      | bzip2程序压缩的文件(压缩率很高)             |
| *.tar.gz   | tar打包，gzip压缩的文件(常用)               |
| *.tar.xz   | tar打包，xz压缩的文件                       |
| *.tar.bz2  | tar打包，bzip2压缩文件                      |
| *.tar.7z   | tar打包，7z压缩文件                         |

常用命令组合：

* zip:
* 打包：zip something.zip something (目录请加上-r参数)
* 解包：unzip something.zip
* 指定路径：-d 参数
* tar:
* 打包：tar -cf something.tar something
* 解包：tar -xf something.tar
* 指定路径：-C 参数

## 九. 文件系统操作与磁盘管理

1. 1 **查看磁盘和目录的容量**

* 使用==df==命令查看磁盘的容量

* 使用==du==命令查看目录的容量

  ```bash
  # 默认同样以块的大小展示
  du
  # 加上 `-h` 参数，以更易读的方式展示
  du -h
  ##
  du -h # 同 --human-readable 以 K，M，G 为单位，提高信息的可读性。
  du -a # 同 --all 显示目录中所有文件的大小。
  du -s # 同 --summarize 仅显示总计，只列出最后加总的值。
  ##
  # 只查看 1 级目录的信息
  du -h -d 0 ~
  # 查看 2 级
  du -h -d 1 ~
  ```

  ==du==（estimate file space usage）命令与 ==df==（report file system disk space usage）命令只有一字之差，希望大家注意不要弄混淆了，你可以像我这样从 man 手册中获取命令的完整描述，记全称就不会搞混了。

