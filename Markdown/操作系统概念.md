# 操作系统概念

## 第一章

### 1.1 操作系统是什么?从计算机系统组成、资源管理、软件分层和扩充机器的观点、服务用户的观点等方面阐述。

操作系统是一种系统软件，它是计算机系统中最基本的软件之一，负责管理计算机系统的资源，提供服务和支持应用程序的运行。从不同的角度来看，可以对操作系统进行如下阐述：

计算机系统组成：操作系统是计算机系统中的一个基本组成部分，它与硬件设备、应用程序和用户构成了计算机系统的四大基本要素。

资源管理：操作系统负责管理计算机系统中的各种资源，包括处理器、内存、磁盘、网络等。它通过分配和调度资源，使得多个应用程序可以有序地运行，并且保证系统的稳定性、安全性和高效性。

软件分层：操作系统采用分层结构，将系统软件分为多层，每层完成不同的功能，从而实现了系统软件的模块化和可扩展性。常见的操作系统软件分层包括内核、文件系统、网络协议栈等。

扩充机器的观点：操作系统可以看做是扩充机器的一种方式，通过提供各种服务和接口，使得应用程序可以简单、高效地访问硬件设备。同时，操作系统还提供了各种系统调用和API，使得应用程序可以方便地使用系统资源和功能。

服务用户的观点：操作系统是为用户提供服务的，它负责管理用户的请求和响应，提供各种服务和功能，如文件管理、进程管理、网络通信、安全管理等。通过操作系统的服务，用户可以方便地使用计算机系统，实现各种应用需求。

进程管理：操作系统负责管理系统中的进程，包括进程的创建、运行、切换和销毁等。它通过进程管理，实现了多任务和多用户的支持，让用户可以同时运行多个应用程序，提高了系统的利用率。

文件管理：操作系统负责管理计算机系统中的文件系统，包括文件的创建、读写、删除和保护等。它通过文件管理，提供了数据的持久化存储，让用户可以方便地管理和使用数据。

网络管理：操作系统负责管理计算机系统中的网络，包括网络协议栈、网络接口等。它通过网络管理，提供了网络通讯的支持，让用户可以方便地进行数据传输和远程访问等操作。

用户管理：操作系统负责管理计算机系统中的用户，包括用户的登录、注销、权限管理等。它通过用户管理，实现了对系统资源的访问控制和安全保护。



### 1.2 操作系统的类型包括那些?说明是操作系统的内核态和用户态联系和区别在哪里?

一. 操作系统类型

1. 单处理操作系统：单处理操作系统是一种最基本的操作系统类型，它适用于单个处理器系统。这种操作系统只能处理一个任务，并且在完成任务后才能处理另一个任务。单处理操作系统通常用于早期计算机系统，因为那时处理器只有一个。

2. 批处理操作系统：这种操作系统最早出现在20世纪50年代，主要用于批量处理大量的作业，不需要交互式用户界面。它们通常使用批处理语言（如JCL），并将大量作业作为单个批次运行。

3. 分时操作系统：这种操作系统允许多个用户同时访问计算机系统，并通过交互式用户界面提供实时响应。用户可以在命令行中输入命令，或通过图形界面与系统进行交互。在分时操作系统中，系统会将CPU时间划分成小的时间片，每个用户都有自己的时间片，使得多个用户可以共享系统资源。

4. 实时操作系统：这种操作系统通常用于控制和监控系统，需要实时响应和高可靠性。它们通常需要满足一定的时间限制，以保证任务在预定的时间内完成。

5. 网络操作系统：这种操作系统专门设计用于管理网络，包括服务器、路由器、防火墙等。它们通常具有许多特殊功能，如支持分布式文件系统、安全性和网络管理工具。

6. 分布式操作系统：分布式操作系统是一种允许多个计算机系统相互协作的操作系统，以便共同完成单个任务或一组任务。分布式操作系统包括分布式文件系统、分布式数据库系统、分布式计算机网络等。分布式操作系统允许在网络上多台计算机之间分配任务，并协同工作，从而提高系统的可靠性和性能。

二.内核态和用户态的联系和区别

1. 权限和优先级：内核态具有最高的权限和最高的优先级，可以访问所有系统资源和执行所有指令。用户态只能访问受限制的资源和执行受限制的指令，且权限和优先级较低。

2. 执行环境：内核态是操作系统内部运行时的执行环境，通常只有操作系统内部的代码运行在内核态。用户态是应用程序运行时的执行环境，通常只有应用程序的代码运行在用户态。
3. 状态切换：用户程序只能通过系统调用请求切换到内核态，以访问系统资源和执行特权操作。内核态执行完成后，操作系统会将用户程序切换回用户态，使其继续执行。这种状态切换是有开销的，会占用CPU时间和系统资源。
4. 安全性和稳定性：为了确保操作系统的安全性和稳定性，内核态只能由操作系统内部的代码访问。这样可以防止用户程序意外或故意地破坏系统资源和数据，保护系统免受恶意软件和攻击。

总之，内核态和用户态之间的主要联系是通过系统调用实现用户程序访问系统资源和执行特权操作。内核态具有最高的权限和最高的优先级，可以访问所有系统资源和执行所有指令。用户态只能访问受限制的资源和执行受限制的指令，权限和优先级较低。内核态和用户态之间的主要区别是权限和优先级、执行环境和状态切换。

### 1.3 阐述操作系统和操作系统内核的联系和区别。

操作系统是一种软件，它管理计算机硬件和软件资源，并提供用户与计算机硬件之间的交互。操作系统内核是操作系统的核心部分，它负责管理计算机硬件和提供基本的系统服务，如进程管理、内存管理、文件系统管理等。

1. 联系：操作系统是建立在内核之上的软件系统，内核是操作系统的核心部分，它管理和控制计算机的硬件资源，并为操作系统提供基本的系统服务。操作系统与内核之间有紧密的联系，操作系统通过内核提供各种服务和接口，使得用户和应用程序可以方便地使用计算机资源。
2. 区别：操作系统是包括内核和其他服务、用户接口等的软件系统，而内核是操作系统的核心部分，它负责管理计算机硬件和提供基本的系统服务。换言之，内核是操作系统的基础，而操作系统是建立在内核之上的更高级别的软件系统。此外，操作系统内核通常是操作系统中最重要、最复杂和最关键的部分，它需要高度的安全性和可靠性。

### 1.4 中断是什么?包括那些类型?中断的处理过程是?。

中断是指计算机在执行程序过程中，由于外部事件的发生（如输入/输出请求、时钟中断等），而暂停当前程序的执行，转而执行另一段特定的程序（中断服务程序）来响应这个事件的过程。

中断包括软中断和硬中断两种类型。软中断是由CPU上正在执行的程序或指令发起的中断。当程序或指令需要访问一些受保护的系统资源时，它需要发起软中断请求，以便操作系统内核处理请求并授予程序或指令访问特权资源的权限。软中断通常由系统调用、异常或软件中断触发。而硬中断则是由由外部设备或其他硬件引起的中断。当外部设备需要CPU处理数据或发送信号时，它会向CPU发送硬中断请求，以便操作系统内核处理请求并执行相应的中断服务程序。硬中断通常由计时器、硬件故障、外部设备信号等触发。可以理解为：软中断是由CPU主动发起的，而硬中断是CPU被动的产生。

中断的处理过程一般包括以下几个步骤：

​    外部事件发生，触发中断信号。

​    CPU保存当前执行程序的上下文（如程序计数器、寄存器状态等）并转到中断向量表中指定的中断服务程序开始执行。

​    中断服务程序根据中断类型执行相应的操作，如读取输入设备、写入输出设备、更新时钟等。

​    中断服务程序执行完毕，CPU恢复之前保存的上下文，回到原来的程序继续执行。

​    如果有多个中断同时发生，CPU会根据优先级选择先处理哪个中断。



## 第二章

### 2.1 操作系统提供的服务和功能可以分为两大类。简要描述这两大类,并讨论它们如何不同。

操作系统提供的服务和功能分为用户功能和系统程序两大类：其中，用户服务包括用户界面、程序执行、I/O操作、文件系统操作、通信、错误检验、资源分配、记账、保护与安全。 一组系统程序是现代操作系统的另一特点，它表述了计算机的逻辑层次。系统程序也称为系统工具，为程序开发和执行提供了一个方便的环境。系统程序可分为：文件管理、信息状态、文件修改、程序语言支持、程序加载与执行、通信、后台服务。

不同：它们的不同在于用户功能是服务于用户，为用户提供服务，方便用户操作，而系统程序则服务于比较底层的程序部分，是为了确保系统本身运行高效

### 2.2 进程间通信的两种模型是什么?这两种方案有何长处和短处?

两种模型：消息传递模型和共享内存模型。

共享内存是指多个进程共享同一块内存区域，各个进程可以读写这块内存区域来进行通信。共享内存的优点是速度快、效率高，因为进程之间直接读写内存，不需要额外的数据拷贝和通信开销；缺点是需要进行同步和互斥控制，否则会出现竞态条件和数据一致性问题。

消息传递是指进程之间通过内核提供的消息队列、信号量、信号等机制进行通信。进程通过发送消息、接收消息来实现进程间的数据传递和同步。消息传递的优点是数据传递可靠、不会出现数据一致性问题；缺点是速度相对较慢，因为需要进行数据拷贝和内核调度。

### 2.3 操作系统结构包括哪几种?说明什么是微内核和单内核结构?,它们的优点和缺点是什么?采用可加载的内核模块的优点是什么?

操作系统结构包含：简单结构，层次结构，微内核结构，模块结构和混合结构五种

微内核：它将操作系统分为一个微内核和多个服务进程，微内核只提供最基本的操作系统功能，如进程管理、内存管理、进程间通信等，其他服务通过进程间通信与微内核进行交互。

单内核：将所有操作系统功能都集成在内核中，包括进程管理、内存管理、驱动程序等。

微内核结构的优点是可靠性高，因为微内核只提供最基本的服务，减少了代码量和复杂度，同时也提高了可扩展性，可以根据需要动态添加或删除服务。缺点是性能较差，因为服务之间需要通过进程间通信进行交互，增加了开销。

单内核结构的优点是性能较好，因为所有服务都在内核中执行，减少了进程间通信的开销，同时也比较简单。缺点是可靠性较差，因为内核中的代码量和复杂度较大，出现问题的概率也较高。

采用可加载的内核模块的优点是可以动态添加或删除内核模块，提高了可扩展性和灵活性，同时也减少了内核的大小和复杂度。

## 第三章

### 3.1 进程的概念,进程由哪几部分组成?进程和程序的联系与区别?进程的5状态包括那些并说明进程状态迁移过程,什么是进程控制块?它包含哪些信息?。

进程的概念：进程是指计算机中正在运行的程序实体，它是操作系统进行资源分配和调度的基本单位。进程可以包含多个线程，每个线程都可以独立运行，但共享相同的进程资源。



进程由以下几部分组成：

程序代码：包括程序的指令和数据。

程序计数器（PC）：记录程序当前执行的位置。

寄存器集合：用于存储程序执行时的临时数据和地址。

进程堆栈：用于存储程序的运行状态和临时数据。

进程控制块（PCB）：用于存储进程的相关信息，如进程状态、进程优先级、进程资源使用情况等。



进程和程序的联系与区别：

联系：程序是指计算机中的一组指令和数据，而进程是指正在运行的程序实体，是一个正在执行的程序。程序在运行时被加载到内存中，形成进程，并被操作系统进行资源分配和调度。

区别：程序是静态的，只有代码和数据，而进程是动态的，包含了程序的代码和数据，以及运行时的状态和资源使用情况。



进程的5种状态：创建状态、就绪状态、运行状态、阻塞状态和终止状态。

创建状态：进程正在被创建，但还没有分配到系统资源。

就绪状态：进程已经被分配了系统资源，等待 CPU 资源的分配。

运行状态：进程正在获得 CPU 资源并执行。

阻塞状态：进程因等待某些事件的发生而被阻塞，如等待 I/O 完成或等待信号量。

终止状态：进程已经完成了任务或出现了错误而被终止。



进程状态迁移过程如下：

创建状态 --> 就绪状态 --> 运行状态 --> 就绪状态- -> 运行状态 --> 阻塞状态 --> 就绪状态 --> 运行状态 --> 终止状态。



进程控制块（PCB）是操作系统管理进程的数据结构，用于存储进程的相关信息。PCB 包含以下信息：

进程标识符：用于唯一标识一个进程。

进程控制信息：包括进程的父进程、子进程、创建时间、运行时间等。

进程状态：记录进程当前的状态，如就绪、运行、阻塞等。

进程优先级：用于决定进程在调度时的优先级。

进程资源使用情况：记录进程正在使用的系统资源，如 CPU 时间、内存空间、打开的文件等。

进程上下文信息：包括程序计数器、寄存器集合、进程堆栈等。



### 3.2 什么是管道通信?管道通信和消息队列的区别?

管道通信是一种进程间通信的方式，它是一种单向的通信方式，即一端写入数据，另一端读取数据。读写进程必须同时存在，否则会阻塞。

消息队列是一种进程间通信的方式，它是一种双向的通信方式，即进程可以向消息队列中写入数据，也可以从消息队列中读取数据。消息队列是一种存储消息的缓冲区，可以实现异步通信和解耦。



管道通信和消息队列的区别在于：

同步方式不同：管道通信是同步的，即读写进程必须同时存在，否则会阻塞；消息队列则可以实现异步通信，读写进程可以分别在不同的时间段内进行。

处理方式不同：管道通信是通过文件描述符进行读写，消息队列是通过消息队列标识符进行读写。

方向不同：管道通信是单向的，消息队列是双向的。

数据类型不同：管道通信只能传输字符流，消息队列可以传输多种数据类型。

存储方式不同：管道通信是即时通信，数据不会存储在缓冲区中，消息队列则是存储在缓冲区中，可以实现异步通信。

## 第五章

一.先来先服务：

| 调度算法 | 周转时间 | 平均周转时间 | 带权周转时间 | 平均带权周转时间 | 等待时间 | 平均等待时间 |
| -------- | -------- | ------------ | ------------ | ---------------- | -------- | ------------ |
| p1       | 10       |              | 1            |                  | 0        |              |
| p2       | 9        |              | 4.5          |                  | 7        |              |
| p3       | 13       |              | 3.6          |                  | 8        |              |
| p4       | 18       | 12.5         | 2.25         | 2.8375           | 10       | 6.25         |

短作业优先算法（非抢断式）

短作业优先（抢断式）

轮转法（时间片为5）
